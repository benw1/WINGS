{% extends "base.html" %}
{% load common_tags %}


{% block body %}
<head>
    <meta charset="UTF-8">

    <title>Task List</title>
</head>


<div class="container">

    <div class="row">
        <div class="col justify content-center">
            <h2 class="text-center">Tasks</h2>
        </div>
        <hr>
    </div>

    <div class="row">
        <div class="d-flex justify-content-center">
            <form method="get">
                {{ task_filter.form.as_p }}
                <button type="submit" class="btn btn-primary">Search</button>
            </form>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <table class="table table-striped">
              <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Timestamp</th>
                  <th>N Runs</th>
                  <th>Run Time</th>
                  <th>Is Exclusive</th>
                  <th>Pipeline</th>
              </tr>
            {% for task in task_page %}
              <tr>
                  <td><a href="{% url 'manager:task_detail_view' task.pk %}">{{task.id}}</a></td>
                  <td>{{task.name}}</td>
                  <td>{{task.timestamp}}</td>
                  <td>{{task.nruns}}</td>
                  <td>{{task.run_time}}</td>
                  <td>{{task.is_exclusive}}</td>
                  <td>{{task.pipline}}</td>
              </tr>
            {% endfor %}
            </table>
        </div>


        <nav aria-label="Page navigation for jobs">
          <ul class="pagination justify-content-center">
              <li class="page-item">
                  <a class="page-link" href="?{% param_replace page=1 %}">First</a>
              </li>
            {% if jobs_page.has_previous %}
              <li class="page-item">
                <a class="page-link" href="?{% param_replace page=jobs_page.previous_page_number %}">Previous</a>
              </li>
            {% else %}
              <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="True">Previous</a>
              </li>
            {% endif %}
            {% for i in pagination_range %}
              {% if jobs_page.number == i %}
                <li class="page-item active" aria-current="page">
                  <span class="page-link">
                    {{ i }}

                  </span>
                </li>
              {% else %}
                <li class="page-item"><a class="page-link" href="?{% param_replace page=i %}">{{ i }}</a></li>
              {% endif %}
            {% endfor %}
            {% if jobs_page.has_next %}
              <li class="page-item">
                <a class="page-link" href="?{% param_replace page=jobs_page.next_page_number %}">Next</a>
              </li>
            {% else %}
              <li class="page-item disabled">
                <a class="page-link" href="#" tabindex="-1" aria-disabled="True">Next</a>
              </li>
            {% endif %}
              <li class="page-item">
                  <a class="page-link" href="?{% param_replace page=total_pages%}">Last</a>
              </li>
          </ul>
        </nav>


    </div>
</div>


{% endblock %}